import createOlMapBundle from './create-ol-map-bundle';
import { createSelector } from 'redux-bundler';

export default createOlMapBundle({
  additionalActions: [
    'MAP_CURSOR_CHANGED'
  ],
  addons:{
    doSetCursor: (cursor) => ({ dispatch }) => {
      let c = cursor;
      if(!c) c = 'grab';
      dispatch({type: 'MAP_CURSOR_CHANGED', payload: {cursor: c} });
    },
    selectCursorClass: (state) => {
      return state.map.cursor;
    },
    selectView: createSelector(
      'selectMap',
      (map) => {
        if(!map) return null;
        return map.getView();
      }
    )
  }
})