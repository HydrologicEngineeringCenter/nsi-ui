import React from 'react';
import { connect } from 'redux-bundler-react';
import { SidebarButton } from '../../application-controls/index';
import classnames from 'classnames';

class LoginButton extends React.Component {
  constructor(props){
    super(props);
    this.handleClick = this.handleClick.bind(this);
  }

  handleClick(){
    const { doLogin, doLogout, isLoggedIn } = this.props;
    if(isLoggedIn){
      doLogout();
    }else{
      doLogin();
    }
  }

  render() {
    const { isLoggedIn } = this.props;

    const btnClass = classnames({
      'mdi': true,
      'mdi-login-variant': !isLoggedIn,
      'mdi-account-check': isLoggedIn
    })

    const title = isLoggedIn ? 'Log Out' : 'Log Into CorpsMap';

    return (
      <SidebarButton
        iconClass={ btnClass }
        label={title}
        title={title}
        onClick={ this.handleClick }
      />
    );
  }
}

export default connect(
  'doLogin',
  'doLogout',
  'selectIsLoggedIn',
  'selectTokenPayload',
  LoginButton
);