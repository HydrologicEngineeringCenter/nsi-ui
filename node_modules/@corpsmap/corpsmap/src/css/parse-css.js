/**
 * This script can be run at the command line to add the .corpsmap prefix
 * to all selectors in a css file, currently pointed at ./corpsmap.css
 * Probably not much use fot this from no on, so not going to make it any better
 * it's here if you want to see what it does.
 */

var css = require("css");
var fs = require("fs");
var stylesheet = fs.readFileSync("./corpsmap.css", {
  encoding: "utf8",
});
var obj = css.parse(stylesheet, { source: "./corpsmap.css" });

const rules = obj.stylesheet.rules;

rules.forEach((rule) => {
  if (rule.selectors && rule.selectors.length) {
    rule.selectors.forEach((sel, i) => {
      // if (sel.indexOf(" ") !== -1) console.log(sel);
      rule.selectors[i] = ".corpsmap " + sel;
    });
  }
});

fs.writeFileSync("./corpsmap-namespaced.css", css.stringify(obj));
